---
layout: default
---

<article class="space-y-6">
  <header class="space-y-2">
    <p class="text-xs uppercase tracking-wide text-slate-500">Brand</p>
    <h1 class="text-2xl font-semibold tracking-tight">{{ page.title }}</h1>
    {% if page.description_short %}
      <p class="text-sm text-slate-600 max-w-2xl">{{ page.description_short }}</p>
    {% endif %}
  </header>

  {% if content %}
    <section class="prose prose-sm max-w-none">
      {{ content }}
    </section>
  {% endif %}

  <section class="space-y-3">
    <h2 class="text-sm font-medium text-slate-900">Current discounts</h2>

    {%- assign brand_coupons = site.coupons | where: "brand_slug", page.brand_slug -%}
    {%- assign active = brand_coupons | where: "is_expired", false | sort: "discount_value" | reverse -%}

    {%- assign has_eligible = false -%}

    <div class="space-y-3">
      {% for coupon in active %}
        {% if coupon.code and coupon.code != '' and coupon.discount_value %}
          {% if coupon.discount_value contains '%' or coupon.discount_value contains '$' %}
            {% assign has_eligible = true %}

            <a href="{{ coupon.url | relative_url }}"
               class="block bg-white border border-slate-200 rounded-xl px-4 py-3 hover:border-slate-400 transition">
              <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
                <div class="flex items-start gap-3">
                  {% if coupon.discount_value %}
                    <span class="text-sm font-semibold px-3 py-1 rounded-full bg-emerald-50 text-emerald-800">
                      {{ coupon.discount_value }}
                    </span>
                  {% endif %}

                  <div class="space-y-1">
                    {% assign display_title = coupon.title %}
                    {% if coupon.discount_value %}
                      {% assign display_title = display_title | remove: coupon.discount_value | strip %}
                      {% assign display_title = display_title | replace: "  ", " " %}
                    {% endif %}
                    {% if display_title == '' and coupon.description_short %}
                      {% assign display_title = coupon.description_short %}
                    {% endif %}

                    <h3 class="text-sm font-medium text-slate-900">
                      {{ display_title }}
                    </h3>

                    <div class="inline-flex items-center text-xs font-semibold text-slate-600 uppercase tracking-wide">
                      <span>View promo code</span>
                      <span aria-hidden="true" class="ml-1">&rarr;</span>
                    </div>
                  </div>
                </div>

                {% if coupon.valid_until %}
                  <p class="text-[11px] text-slate-500 whitespace-nowrap">
                    Valid until {{ coupon.valid_until }}
                  </p>
                {% endif %}
              </div>
            </a>
          {% endif %}
        {% endif %}
      {% endfor %}
    </div>

    {% unless has_eligible %}
      <p class="text-sm text-slate-500">No active discounts right now. Check back soon.</p>
    {% endunless %}
  </section>

  <section class="space-y-2">
    <h2 class="text-xs font-medium text-slate-500 uppercase tracking-wide">Expired discounts</h2>
    {% assign expired = brand_coupons | where: "is_expired", true %}
    {% if expired.size > 0 %}
      <ul class="space-y-1 text-xs text-slate-500">
        {% for coupon in expired %}
          <li>
            <a href="{{ coupon.url | relative_url }}" class="hover:text-slate-900">
              {{ coupon.title }}
            </a>
            <span class="ml-1 text-[11px] text-slate-400">(expired)</span>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-xs text-slate-400">No expired discounts yet.</p>
    {% endif %}
  </section>
</article>
