---
layout: default
---

<article class="space-y-6 max-w-2xl">
  <header class="space-y-2">
    <p class="text-xs uppercase tracking-wide text-slate-500">
      <a href="{{ '/brands/' | append: page.brand_slug | append: '/' | relative_url }}" class="hover:text-slate-900">
        {{ page.brand_slug | capitalize }}
      </a>
      · Coupon
    </p>
    <h1 class="text-2xl font-semibold tracking-tight">{{ page.title }}</h1>

    <div class="flex flex-wrap items-center gap-3">
      {% if page.discount_value %}
        <span class="text-xs font-semibold px-2 py-1 rounded-full bg-slate-100 text-slate-800">
          {{ page.discount_value }}
        </span>
      {% endif %}

      {% if page.is_expired %}
        <span class="text-xs font-medium px-2 py-1 rounded-full bg-red-50 text-red-700">
          Expired
        </span>
      {% elsif page.valid_until %}
        <span class="text-xs text-slate-500">
          Valid until {{ page.valid_until }}
        </span>
      {% endif %}
    </div>
  </header>

  {% if page.code %}
    <section class="bg-slate-900 text-slate-50 rounded-xl px-4 py-3 space-y-2" id="coupon-code-card">
      <p class="text-[11px] uppercase tracking-wide text-slate-400">Code</p>

      <button type="button"
              class="hidden-ink w-full text-left border border-slate-700 rounded-lg px-3 py-3"
              data-code="{{ page.code }}"
              aria-label="Reveal and copy coupon code">
        <span class="relative inline-block font-mono text-lg hidden-ink-code">{{ page.code }}</span>
        <span class="block mt-1 text-xs text-slate-300">Tap to reveal & copy</span>
      </button>

      <p id="copy-status" class="text-xs text-emerald-200 hidden">Copied to clipboard. Opening offer…</p>
    </section>

    <style>
      .hidden-ink {
        position: relative;
        background: #0b1224;
        overflow: hidden;
      }

      .hidden-ink::before,
      .hidden-ink::after {
        content: "";
        position: absolute;
        inset: -12px;
        pointer-events: none;
        transition: opacity 250ms ease;
      }

      .hidden-ink::before {
        background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.35), transparent 30%),
                    radial-gradient(circle at 80% 40%, rgba(146, 164, 255, 0.35), transparent 28%),
                    radial-gradient(circle at 50% 80%, rgba(255, 255, 255, 0.3), transparent 32%);
        filter: blur(6px);
        opacity: 0.85;
        mix-blend-mode: screen;
        animation: shimmer 2.5s linear infinite;
      }

      .hidden-ink::after {
        background: repeating-linear-gradient(45deg, rgba(148, 163, 184, 0.2) 0, rgba(148, 163, 184, 0.2) 6px, transparent 8px, transparent 14px);
        opacity: 0.55;
        animation: grain 1s steps(2) infinite;
      }

      .hidden-ink-code {
        color: transparent;
        text-shadow: 0 0 14px rgba(255, 255, 255, 0.95);
        filter: blur(8px);
        letter-spacing: 0.04em;
        transition: filter 300ms ease, text-shadow 300ms ease, color 300ms ease;
      }

      .hidden-ink.revealed::before,
      .hidden-ink.revealed::after {
        opacity: 0;
        animation: none;
      }

      .hidden-ink.revealed .hidden-ink-code {
        color: #e2e8f0;
        filter: blur(0);
        text-shadow: none;
      }

      @keyframes shimmer {
        0% { transform: translateX(-20px); }
        100% { transform: translateX(20px); }
      }

      @keyframes grain {
        0%, 100% { transform: translate(0, 0); }
        10% { transform: translate(-3%, -2%); }
        20% { transform: translate(3%, 2%); }
        30% { transform: translate(-2%, 2%); }
        40% { transform: translate(2%, -2%); }
        50% { transform: translate(-1%, 1%); }
        60% { transform: translate(1%, -1%); }
        70% { transform: translate(-2%, -2%); }
        80% { transform: translate(2%, 2%); }
        90% { transform: translate(1%, -1%); }
      }
    </style>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const container = document.getElementById('coupon-code-card');
        const button = container?.querySelector('.hidden-ink');
        const status = document.getElementById('copy-status');

        if (!button) return;

        const code = button.getAttribute('data-code');
        if (!code) return;

        const openOffer = () => {
          const targetUrl = `https://spendlessnike.wiki/${encodeURIComponent(code)}`;
          window.open(targetUrl, '_blank', 'noopener');
        };

        button.addEventListener('click', async () => {
          button.classList.add('revealed');
          if (status) {
            status.classList.remove('hidden');
            status.textContent = 'Copied to clipboard. Opening offer…';
          }

          try {
            await navigator.clipboard.writeText(code);
          } catch (error) {
            /* Clipboard might be blocked; still proceed to open */
          }

          openOffer();
        });
      });
    </script>
  {% endif %}

  <section class="prose prose-sm max-w-none">
    {{ content }}
  </section>

  {% if page.url_external %}
    <a href="{{ page.url_external }}"
       class="inline-flex items-center text-sm font-medium text-slate-900 border border-slate-300 rounded-full px-4 py-2 hover:bg-slate-100">
      Go to {{ page.brand_slug | capitalize }} site
      <span class="ml-2">↗</span>
    </a>
  {% endif %}
</article>
