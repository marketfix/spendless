---
layout: default
---

<article class="space-y-6">
  <header class="space-y-2">
    <p class="text-xs uppercase tracking-wide text-slate-500">Brand</p>
    <h1 class="text-2xl font-semibold tracking-tight">{{ page.title }}</h1>
    {% if page.description_short %}
      <p class="text-sm text-slate-600 max-w-2xl">{{ page.description_short }}</p>
    {% endif %}
  </header>

  {% if content %}
    <section class="prose prose-sm max-w-none">
      {{ content }}
    </section>
  {% endif %}

  <section class="space-y-3">
    <h2 class="text-sm font-medium text-slate-900">Current discounts</h2>

    {% assign brand_coupons = site.coupons | where: "brand_slug", page.brand_slug %}
    {% assign active = brand_coupons | where: "is_expired", false %}
    {% assign eligible = active
        | where_exp: "c", "c.code and c.code != '' and (c.discount_value contains '%' or c.discount_value contains '$')"
        | sort: "discount_value"
        | reverse %}

    {% if eligible.size == 0 %}
      <p class="text-sm text-slate-500">No active discounts right now. Check back soon.</p>
    {% else %}
      <div class="space-y-3">
        {% for coupon in eligible %}
          <a href="{{ coupon.url | relative_url }}"
             class="block bg-white border border-slate-200 rounded-xl px-4 py-3 hover:border-slate-400 transition">
            <div class="flex items-start justify-between gap-4">
              <div>
                {% assign display_title = coupon.title %}
                {% if coupon.discount_value %}
                  {% assign display_title = display_title | remove: coupon.discount_value | strip %}
                  {% assign display_title = display_title | replace: "  ", " " %}
                {% endif %}
                {% if display_title == '' and coupon.description_short %}
                  {% assign display_title = coupon.description_short %}
                {% endif %}
                <h3 class="text-sm font-medium text-slate-900">
                  <strong>Save on: </strong>{{ display_title }}
                </h3>
                {% if coupon.valid_until %}
                  <p class="mt-1 text-[11px] text-slate-500">
                    Valid until {{ coupon.valid_until }}
                  </p>
                {% endif %}
              </div>
              {% if coupon.discount_value %}
                <span class="text-xs font-semibold px-2 py-1 rounded-full bg-emerald-50 text-emerald-800">
                  {{ coupon.discount_value }}
                </span>
              {% endif %}
            </div>
          </a>
        {% endfor %}
      </div>
    {% endif %}
  </section>

  <section class="space-y-2">
    <h2 class="text-xs font-medium text-slate-500 uppercase tracking-wide">Expired discounts</h2>
    {% assign expired = brand_coupons | where: "is_expired", true %}
    {% if expired.size > 0 %}
      <ul class="space-y-1 text-xs text-slate-500">
        {% for coupon in expired %}
          <li>
            <a href="{{ coupon.url | relative_url }}" class="hover:text-slate-900">
              {{ coupon.title }}
            </a>
            <span class="ml-1 text[11px] text-slate-400">(expired)</span>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-xs text-slate-400">No expired discounts yet.</p>
    {% endif %}
  </section>
</article>
