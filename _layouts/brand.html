---
layout: default
---

{% if page.logo_path %}
  {% assign logo_path = page.logo_path %}
{% else %}
  {% assign logo_path = '/media/brand_logos/' | append: page.brand_slug | append: '.jpg' %}
{% endif %}
{% assign brand_name = page.title | replace: ' discount codes', '' | replace: ' promo codes', '' | strip %}
<article class="space-y-6">
  <header class="liquid-glass rounded-3xl p-4 sm:p-6">
    <div class="flex items-center gap-3">
      <div class="w-16 h-16 shrink-0 aspect-square rounded-2xl border border-slate-200 overflow-hidden bg-white/80">
        <img src="{{ logo_path | relative_url }}" alt="{{ brand_name }} logo" class="w-full h-full object-cover" loading="lazy">
      </div>
      <div>
        <p class="text-xs uppercase tracking-[0.2em] text-slate-500">Brand vault</p>
        <h1 class="text-2xl font-semibold">{{ brand_name }}</h1>
      </div>
    </div>
    <p class="text-sm text-slate-600 mt-3">Open any offer to launch the partner site. Your code reveals instantly and is ready to copy—plus you earn XP for each unlock.</p>
  </header>

  <section class="space-y-3">
    {% assign brand_coupons = site.coupons | where: "brand_slug", page.brand_slug %}
    {% assign active = brand_coupons | where: "is_expired", false %}

    {% assign valid_offer_count = 0 %}
    {% for coupon in active %}
      {% assign discount_text = coupon.discount_value | default: '' %}
      {% if discount_text contains '%' or discount_text contains '$' %}
        {% assign valid_offer_count = valid_offer_count | plus: 1 %}
      {% endif %}
    {% endfor %}

    {% if valid_offer_count > 0 %}
      {% for coupon in active %}
        {% assign discount_text = coupon.discount_value | default: '' %}
        {% if discount_text contains '%' or discount_text contains '$' %}
          {% assign cleaned_title = coupon.title %}
          {% assign leading_discount = coupon.discount_value | append: ' ' %}
          {% assign cleaned_title = cleaned_title | remove_first: leading_discount %}
          {% assign leading_discount_dash = coupon.discount_value | append: ' - ' %}
          {% assign cleaned_title = cleaned_title | remove_first: leading_discount_dash %}
        <a href="{{ coupon.url | relative_url }}" data-surface-card class="block liquid-glass rounded-2xl px-4 py-3">
          <div>
            <div>
              {% if coupon.discount_value %}
                <span class="inline-flex text-xs font-semibold px-2 py-1 rounded-full bg-emerald-100 text-emerald-800">{{ coupon.discount_value }}</span>
              {% endif %}
              <h3 class="text-sm font-medium mt-2">{{ cleaned_title }}</h3>
              <p class="text-xs text-slate-500 mt-1">View Code ↗</p>
            </div>
          </div>
        </a>
        {% endif %}
      {% endfor %}
    {% else %}
      <p class="text-sm text-slate-500">No active discounts yet.</p>
    {% endif %}
  </section>
</article>
